<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="JspGram - Profile Page">
<title>JspGram - Profile</title>

<link rel="icon" type="image/png" href="/images/favicon.png">

<style>
:root {
	--primary-color: #0095f6;
	--secondary-color: #00376b;
	--background-color: #fafafa;
	--border-color: #dbdbdb;
}

* {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
	font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
		Helvetica, Arial, sans-serif;
}

body {
	background-color: var(--background-color);
}

.navbar {
	background-color: white;
	border-bottom: 1px solid var(--border-color);
	padding: 0.75rem 2rem;
	position: fixed;
	width: 100%;
	top: 0;
	z-index: 1000;
}

.nav-content {
	max-width: 975px;
	margin: 0 auto;
	display: flex;
	justify-content: space-between;
	align-items: center;
}

.logo img {
	width: 103px;
	height: auto;
}

.nav-right {
	display: flex;
	align-items: center;
	gap: 1rem;
}

.nav-right button {
	padding: 0.5rem 1rem;
	border: none;
	border-radius: 6px;
	cursor: pointer;
	font-weight: 600;
	background: linear-gradient(45deg, #0095f6, #006ce0);
	color: white;
	transition: all 0.3s ease;
}

.nav-right button:hover {
	background: linear-gradient(45deg, #006ce0, #004ab0);
}

.message {
	margin-top: 80px;
	text-align: center;
	padding: 1rem;
}

.success-message {
	color: #28a745;
	margin-bottom: 0.5rem;
}

.error-message {
	color: #dc3545;
	margin-bottom: 0.5rem;
}

.profile-container {
	max-width: 935px;
	margin: 30px auto;
	padding: 2rem;
	background-color: white;
	border-radius: 10px;
	box-shadow: 0 6px 15px rgba(0, 0, 0, 0.05);
}

.profile-header {
	display: grid;
	grid-template-columns: 1fr 2fr;
	gap: 2rem;
	margin-bottom: 3rem;
	align-items: center;
	padding: 1rem;
}

.profile-picture {
	width: 150px;
	height: 150px;
	border-radius: 50%;
	object-fit: cover;
	border: 3px solid var(--primary-color);
	transition: transform 0.3s ease;
}

.profile-picture:hover {
	transform: scale(1.05);
}

.profile-info {
	display: flex;
	flex-direction: column;
	gap: 1rem;
}

.profile-info h1 {
	font-size: 28px;
	color: var(--secondary-color);
	display: flex;
	align-items: center;
	gap: 0.5rem;
}

.profile-info p {
	color: #666;
	font-size: 16px;
}

.profile-actions {
	display: flex;
	gap: 1rem;
	flex-wrap: wrap;
}

.edit-profile-btn {
	padding: 0.5rem 1rem;
	background: linear-gradient(45deg, #0095f6, #006ce0);
	color: white;
	border: none;
	border-radius: 6px;
	cursor: pointer;
	font-weight: 600;
	transition: all 0.3s ease;
}

.edit-profile-btn:hover {
	background: linear-gradient(45deg, #006ce0, #004ab0);
}

.stats-container {
	display: flex;
	gap: 2rem;
	padding: 1.5rem;
	border-top: 1px solid var(--border-color);
	border-bottom: 1px solid var(--border-color);
	margin-bottom: 2rem;
	justify-content: center;
	background-color: white;
	flex-wrap: wrap;
}

.stat-item {
	text-align: center;
	flex: 1 1 100px;
}

.stat-item h3 {
	color: var(--secondary-color);
	margin-bottom: 0.5rem;
}

.stat-item span {
	font-size: 18px;
	font-weight: 600;
	color: #666;
}

.stat-item button {
	padding: 0.5rem 1rem;
	background: linear-gradient(45deg, #0095f6, #006ce0);
	color: white;
	border: none;
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.3s ease;
}

.stat-item button:hover {
	background: linear-gradient(45deg, #006ce0, #004ab0);
}

.posts-section {
	padding: 1rem;
}

.posts-section h1 {
	color: var(--secondary-color);
	margin-bottom: 1.5rem;
	font-size: 24px;
}

.post-item {
	background-color: white;
	padding: 1rem;
	border-radius: 8px;
	margin-bottom: 1.5rem;
	box-shadow: 0 3px 6px rgba(0, 0, 0, 0.05);
	display: flex;
	flex-direction: column;
	align-items: start;
	gap: 0.5rem;
}

.post-item img {
	border-radius: 8px;
	object-fit: cover;
	width: 100%;
	max-width: 400px;
}

.post-item span {
	color: #666;
}

.post-item button {
	padding: 0.5rem 1rem;
	margin-right: 0.5rem;
	border: none;
	border-radius: 6px;
	cursor: pointer;
	font-weight: 600;
	transition: all 0.3s ease;
}

.post-item button:first-of-type {
	background: linear-gradient(45deg, #0095f6, #006ce0);
	color: white;
}

.post-item button:last-of-type {
	background-color: #dc3545;
	color: white;
}

.post-item button:hover {
	opacity: 0.9;
}

.add-post-btn {
	display: block;
	width: 100%;
	padding: 1rem;
	background: linear-gradient(45deg, #0095f6, #006ce0);
	color: white;
	border: none;
	border-radius: 6px;
	cursor: pointer;
	font-weight: bold;
	transition: all 0.3s ease;
	margin-top: 2rem;
}

.add-post-btn:hover {
	background: linear-gradient(45deg, #006ce0, #004ab0);
}

@media ( max-width : 768px) {
	.profile-header {
		grid-template-columns: 1fr;
		text-align: center;
	}
	.profile-picture {
		margin: 0 auto;
	}
	.stats-container {
		flex-wrap: wrap;
	}
	.stat-item {
		flex: 1 1 calc(50% - 1rem);
	}
}
</style>
</head>

<body>

	<nav class="navbar">
		<div class="nav-content">
			<div class="logo">
				<a href="/home"><img src="/images/jspgram-logo.png"
					alt="JspGram Logo"></a>
			</div>
			<div class="nav-right">
				<a href="/home"><button class="profile-button">Home</button></a> <a
					href="/logout"><button class="logout-button">Logout</button></a>
			</div>
		</div>
	</nav>
	<div class="message">
		<h3 class="success-message" th:text="${session.pass}"></h3>
		<h3 class="error-message" th:text="${session.fail}"></h3>
		<th:block th:text="${@messageRemover.remove()}"></th:block>
	</div>
	<main class="profile-container" th:if="${session.user != null}">
		<section class="profile-header">
			<img th:if="${session.user.imageUrl==null}"
				src="https://static.vecteezy.com/system/resources/previews/019/879/186/non_2x/user-icon-on-transparent-background-free-png.png"
				alt="Profile" class="profile-picture"> <img
				th:if="${session.user.imageUrl}" th:src="${session.user.imageUrl}"
				alt="Profile" class="profile-picture">
			<div class="profile-info">
				<h1 th:text="${session.user.username}">UserName</h1>
				<span th:if="${session.user.prime}" style="color: #1DA1F2;">âœ”</span>
				<p th:text="${session.user.email}"></p>
				<p th:if="${session.user.bio}">
					Bio: <span th:text="${session.user.bio}"></span>
				</p>
				<div class="profile-actions">
					<a href="/edit-profile">
						<button class="edit-profile-btn">Edit Profile</button> <a
						th:if="${!session.user.prime}" href="/prime">
							<button class="edit-profile-btn">Become Prime Member</button>
					</a>
					</a>
				</div>
			</div>
		</section>

		<section class="stats-container">
			<div class="stat-item">
				<h3>Posts</h3>
				<span th:if="${posts==null}">0</span> <span th:if="${posts}"
					th:text="${posts.size()}"></span>
			</div>
			<div class="stat-item">
				<a href="/followers"><h3>Followers</h3></a> <span
					th:text="${session.user.followers.size()}"></span>
			</div>
			<div class="stat-item">
				<a href="/following"><h3>Following</h3></a> <span
					th:text="${session.user.following.size()}"></span>
			</div>
			<div class="stat-item">
				<a href="/suggestions"><button>Suggestions</button></a>
			</div>
		</section>

		<div th:if="${posts}" class="posts-section">
			<h1>My Posts</h1>
			<div th:each="post:${posts}" class="post-item">
				<img th:src="${post.imageUrl}" height="150px" width="150px"> <span
					th:text="${post.caption}"></span> <span
					th:text="${post.postedTime}"></span> <a
					th:href="'/edit/'+${post.id}"><button>Edit</button></a> <a
					th:href="'/delete/'+${post.id}"><button
						onclick="confirm('Are you sure you want to delete?')">Delete</button></a>
			</div>
		</div>

		<a href="/addpost"><button class="add-post-btn">Add New
				Post</button></a>

	</main>
</body>
</html>